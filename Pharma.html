<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediCare Pharmacy - Management System</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.1rem;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .form-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .form-section h2 {
            color: #2c3e50;
            margin-bottom: 25px;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .form-section h2 i {
            color: #667eea;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e6ed;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #fff;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #95a5a6, #7f8c8d);
        }

        .btn-danger {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }

        .data-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            grid-column: 1 / -1;
        }

        .data-section h2 {
            color: #2c3e50;
            margin-bottom: 25px;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .search-bar {
            margin-bottom: 20px;
            display: flex;
            gap: 15px;
        }

        .search-bar input {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #e0e6ed;
            border-radius: 10px;
            font-size: 1rem;
        }

        .table-container {
            overflow-x: auto;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e6ed;
        }

        th {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 0.5px;
        }

        tr:hover {
            background: #f8f9fa;
            transform: scale(1.01);
            transition: all 0.2s ease;
        }

        .status {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status.in-stock {
            background: #d4edda;
            color: #155724;
        }

        .status.low-stock {
            background: #fff3cd;
            color: #856404;
        }

        .status.out-of-stock {
            background: #f8d7da;
            color: #721c24;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 0.8rem;
            border-radius: 6px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card i {
            font-size: 2.5rem;
            margin-bottom: 15px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-card h3 {
            font-size: 2rem;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #7f8c8d;
            font-weight: 500;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .search-bar {
                flex-direction: column;
            }
            
            .action-buttons {
                flex-direction: column;
            }
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
        }

        .notification.error {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-pills"></i> MedBase Pharmacy</h1>
            <p>Advanced Medicine Management System</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <i class="fas fa-capsules"></i>
                <h3 id="totalMeds">0</h3>
                <p>Total Medicines</p>
            </div>
            <div class="stat-card">
                <i class="fas fa-check-circle"></i>
                <h3 id="inStock">0</h3>
                <p>In Stock</p>
            </div>
            <div class="stat-card">
                <i class="fas fa-exclamation-triangle"></i>
                <h3 id="lowStock">0</h3>
                <p>Low Stock</p>
            </div>
            <div class="stat-card">
                <i class="fas fa-times-circle"></i>
                <h3 id="outStock">0</h3>
                <p>Out of Stock</p>
            </div>
        </div>

        <div class="main-content">
            <div class="form-section">
                <h2><i class="fas fa-plus-circle"></i> Add New Medicine</h2>
                <form id="medicineForm">
                    <div class="form-group">
                        <label for="medicineName">Medicine Name *</label>
                        <input type="text" id="medicineName" name="medicineName" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="category">Category *</label>
                            <select id="category" name="category" required>
                                <option value="">Select Category</option>
                                <option value="Antibiotics">Antibiotics</option>
                                <option value="Pain Relief">Pain Relief</option>
                                <option value="Vitamins">Vitamins</option>
                                <option value="Heart Medicine">Heart Medicine</option>
                                <option value="Diabetes">Diabetes</option>
                                <option value="Blood Pressure">Blood Pressure</option>
                                <option value="Respiratory">Respiratory</option>
                                <option value="Digestive">Digestive</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="manufacturer">Manufacturer *</label>
                            <input type="text" id="manufacturer" name="manufacturer" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="batchNumber">Batch Number *</label>
                            <input type="text" id="batchNumber" name="batchNumber" required>
                        </div>
                        <div class="form-group">
                            <label for="expiryDate">Expiry Date *</label>
                            <input type="date" id="expiryDate" name="expiryDate" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="quantity">Quantity *</label>
                            <input type="number" id="quantity" name="quantity" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="price">Price (₹) *</label>
                            <input type="number" id="price" name="price" min="0" step="0.01" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="description">Description</label>
                        <textarea id="description" name="description" rows="3" placeholder="Enter medicine description..."></textarea>
                    </div>

                    <div class="form-group">
                        <button type="submit" class="btn">
                            <i class="fas fa-save"></i> Add Medicine
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="resetForm()">
                            <i class="fas fa-undo"></i> Reset
                        </button>
                    </div>
                </form>
            </div>

            <div class="form-section">
                <h2><i class="fas fa-upload"></i> Bulk Import</h2>
                <div class="form-group">
                    <label for="csvFile">Upload CSV File</label>
                    <input type="file" id="csvFile" accept=".csv" onchange="handleFileUpload(event)">
                </div>
                <div class="form-group">
                    <button type="button" class="btn" onclick="downloadTemplate()">
                        <i class="fas fa-download"></i> Download Template
                    </button>
                </div>
                
                <div style="margin-top: 30px;">
                    <h3>Quick Actions</h3>
                    <div style="margin-top: 15px;">
                        <button type="button" class="btn btn-secondary btn-small" onclick="exportData()">
                            <i class="fas fa-file-export"></i> Export Data
                        </button>
                        <button type="button" class="btn btn-danger btn-small" onclick="clearAllData()" style="margin-left: 10px;">
                            <i class="fas fa-trash"></i> Clear All
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="data-section">
            <h2><i class="fas fa-database"></i> Medicine Inventory</h2>
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Search medicines..." onkeyup="searchMedicines()">
                <select id="categoryFilter" onchange="filterByCategory()">
                    <option value="">All Categories</option>
                    <option value="Antibiotics">Antibiotics</option>
                    <option value="Pain Relief">Pain Relief</option>
                    <option value="Vitamins">Vitamins</option>
                    <option value="Heart Medicine">Heart Medicine</option>
                    <option value="Diabetes">Diabetes</option>
                    <option value="Blood Pressure">Blood Pressure</option>
                    <option value="Respiratory">Respiratory</option>
                    <option value="Digestive">Digestive</option>
                </select>
                <select id="stockFilter" onchange="filterByStock()">
                    <option value="">All Stock Status</option>
                    <option value="in-stock">In Stock</option>
                    <option value="low-stock">Low Stock</option>
                    <option value="out-of-stock">Out of Stock</option>
                </select>
            </div>

            <div class="table-container">
                <table id="medicineTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Category</th>
                            <th>Manufacturer</th>
                            <th>Batch</th>
                            <th>Expiry</th>
                            <th>Quantity</th>
                            <th>Price (₹)</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="medicineTableBody">
                        <!-- Data will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <script>
        let medicines = JSON.parse(localStorage.getItem('medicines')) || [];
        let editingId = null;

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            setTimeout(() => notification.classList.remove('show'), 3000);
        }

        function updateStats() {
            const total = medicines.length;
            const inStock = medicines.filter(m => m.quantity > 10).length;
            const lowStock = medicines.filter(m => m.quantity > 0 && m.quantity <= 10).length;
            const outStock = medicines.filter(m => m.quantity === 0).length;

            document.getElementById('totalMeds').textContent = total;
            document.getElementById('inStock').textContent = inStock;
            document.getElementById('lowStock').textContent = lowStock;
            document.getElementById('outStock').textContent = outStock;
        }

        function getStockStatus(quantity) {
            if (quantity === 0) return 'out-of-stock';
            if (quantity <= 10) return 'low-stock';
            return 'in-stock';
        }

        function getStatusText(status) {
            switch(status) {
                case 'in-stock': return 'In Stock';
                case 'low-stock': return 'Low Stock';
                case 'out-of-stock': return 'Out of Stock';
                default: return 'Unknown';
            }
        }

        function renderTable(data = medicines) {
            const tbody = document.getElementById('medicineTableBody');
            tbody.innerHTML = '';

            if (data.length === 0) {
                tbody.innerHTML = '<tr><td colspan="9" style="text-align: center; color: #7f8c8d;">No medicines found</td></tr>';
                return;
            }

            data.forEach(medicine => {
                const status = getStockStatus(medicine.quantity);
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${medicine.name}</strong></td>
                    <td>${medicine.category}</td>
                    <td>${medicine.manufacturer}</td>
                    <td>${medicine.batchNumber}</td>
                    <td>${new Date(medicine.expiryDate).toLocaleDateString()}</td>
                    <td>${medicine.quantity}</td>
                    <td>₹${medicine.price}</td>
                    <td><span class="status ${status}">${getStatusText(status)}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn btn-small" onclick="editMedicine(${medicine.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-danger btn-small" onclick="deleteMedicine(${medicine.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function saveMedicine(medicineData) {
            if (editingId) {
                const index = medicines.findIndex(m => m.id === editingId);
                medicines[index] = { ...medicineData, id: editingId };
                showNotification('Medicine updated successfully!');
                editingId = null;
            } else {
                medicineData.id = Date.now();
                medicines.push(medicineData);
                showNotification('Medicine added successfully!');
            }
            
            localStorage.setItem('medicines', JSON.stringify(medicines));
            renderTable();
            updateStats();
        }

        function editMedicine(id) {
            const medicine = medicines.find(m => m.id === id);
            if (!medicine) return;

            editingId = id;
            document.getElementById('medicineName').value = medicine.name;
            document.getElementById('category').value = medicine.category;
            document.getElementById('manufacturer').value = medicine.manufacturer;
            document.getElementById('batchNumber').value = medicine.batchNumber;
            document.getElementById('expiryDate').value = medicine.expiryDate;
            document.getElementById('quantity').value = medicine.quantity;
            document.getElementById('price').value = medicine.price;
            document.getElementById('description').value = medicine.description || '';

            document.querySelector('.form-section h2').innerHTML = '<i class="fas fa-edit"></i> Edit Medicine';
            document.querySelector('button[type="submit"]').innerHTML = '<i class="fas fa-save"></i> Update Medicine';
        }

        function deleteMedicine(id) {
            if (confirm('Are you sure you want to delete this medicine?')) {
                medicines = medicines.filter(m => m.id !== id);
                localStorage.setItem('medicines', JSON.stringify(medicines));
                renderTable();
                updateStats();
                showNotification('Medicine deleted successfully!');
            }
        }

        function resetForm() {
            document.getElementById('medicineForm').reset();
            editingId = null;
            document.querySelector('.form-section h2').innerHTML = '<i class="fas fa-plus-circle"></i> Add New Medicine';
            document.querySelector('button[type="submit"]').innerHTML = '<i class="fas fa-save"></i> Add Medicine';
        }

        function searchMedicines() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const filtered = medicines.filter(medicine =>
                medicine.name.toLowerCase().includes(searchTerm) ||
                medicine.manufacturer.toLowerCase().includes(searchTerm) ||
                medicine.category.toLowerCase().includes(searchTerm)
            );
            renderTable(filtered);
        }

        function filterByCategory() {
            const category = document.getElementById('categoryFilter').value;
            const filtered = category ? medicines.filter(m => m.category === category) : medicines;
            renderTable(filtered);
        }

        function filterByStock() {
            const stockStatus = document.getElementById('stockFilter').value;
            if (!stockStatus) {
                renderTable(medicines);
                return;
            }
            
            const filtered = medicines.filter(m => getStockStatus(m.quantity) === stockStatus);
            renderTable(filtered);
        }

        function downloadTemplate() {
            const csvContent = "Name,Category,Manufacturer,Batch Number,Expiry Date,Quantity,Price,Description\n" +
                              "Paracetamol,Pain Relief,PharmaCorp,PCL001,2025-12-31,100,15.50,For fever and pain relief\n" +
                              "Amoxicillin,Antibiotics,MediPharma,AMX002,2025-10-15,50,85.00,Antibiotic for bacterial infections";
            
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'medicine_template.csv';
            a.click();
            window.URL.revokeObjectURL(url);
        }

        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                const csv = e.target.result;
                const lines = csv.split('\n');
                const headers = lines[0].split(',');
                
                for (let i = 1; i < lines.length; i++) {
                    if (lines[i].trim() === '') continue;
                    
                    const values = lines[i].split(',');
                    const medicine = {
                        id: Date.now() + i,
                        name: values[0]?.trim(),
                        category: values[1]?.trim(),
                        manufacturer: values[2]?.trim(),
                        batchNumber: values[3]?.trim(),
                        expiryDate: values[4]?.trim(),
                        quantity: parseInt(values[5]) || 0,
                        price: parseFloat(values[6]) || 0,
                        description: values[7]?.trim() || ''
                    };
                    
                    if (medicine.name && medicine.category) {
                        medicines.push(medicine);
                    }
                }
                
                localStorage.setItem('medicines', JSON.stringify(medicines));
                renderTable();
                updateStats();
                showNotification(`Successfully imported ${lines.length - 1} medicines!`);
            };
            reader.readAsText(file);
        }

        function exportData() {
            if (medicines.length === 0) {
                showNotification('No data to export!', 'error');
                return;
            }

            const csvContent = "Name,Category,Manufacturer,Batch Number,Expiry Date,Quantity,Price,Description\n" +
                medicines.map(m => `${m.name},${m.category},${m.manufacturer},${m.batchNumber},${m.expiryDate},${m.quantity},${m.price},"${m.description || ''}"`).join('\n');
            
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `medicine_data_${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            window.URL.revokeObjectURL(url);
            showNotification('Data exported successfully!');
        }

        function clearAllData() {
            if (confirm('Are you sure you want to clear all medicine data? This action cannot be undone.')) {
                medicines = [];
                localStorage.removeItem('medicines');
                renderTable();
                updateStats();
                showNotification('All data cleared successfully!');
            }
        }

        // Form submission
        document.getElementById('medicineForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const medicineData = {
                name: formData.get('medicineName'),
                category: formData.get('category'),
                manufacturer: formData.get('manufacturer'),
                batchNumber: formData.get('batchNumber'),
                expiryDate: formData.get('expiryDate'),
                quantity: parseInt(formData.get('quantity')),
                price: parseFloat(formData.get('price')),
                description: formData.get('description')
            };
            
            saveMedicine(medicineData);
            resetForm();
        });

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            renderTable();
            updateStats();
        });
    </script>
</body>
</html>
